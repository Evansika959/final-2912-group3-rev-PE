meta:
  version: 3
  flow: Classic
  # substituting_steps:

DESIGN_NAME: reversible_pe

VERILOG_FILES:
  - dir::../reversible_pipeline/verilog/modules/reversible_pe.sv
  # - dir::../reversible_pipeline/verilog/modules/mult8_rev.sv
  - dir::../reversible_pipeline/verilog/modules/pe_buffer.sv
  - dir::../reversible_pipeline/verilog/modules/spi_slave.sv
  - dir::../custom_ip/16b_FA/16b_FA.vh
  - dir::../reversible_pipeline/verilog/custom_blocks/fa16_rev.sv
  - dir::../reversible_pipeline/verilog/custom_blocks/mult8_rev.sv

VERILOG_DEFINES:
  - USE_POWER_PINS

# VERILOG_INCLUDE_DIRS:
#   - dir::../reversible_pipeline/verilog/custom_blocks
#   - dir::../custom_ip/16b_FA
#   - dir::../reversible_pipeline/verilog/modules

CLOCK_PORT: clk
CLOCK_PERIOD: 60

VDD_NETS:
  - VDD
GND_NETS:
  - VSS

PRIMARY_GDSII_STREAMOUT_TOOL: klayout

PDN_MACRO_CONNECTIONS: 
- "u_fa16_rev.u_rev.u_fa16b_rev VDD VSS VDD VSS"
- "u8.u_rev.u_mult8b_rev VDD VSS VDD VSS"
# "VERILOG_POWER_DEFINE": USE_POWER_PINS
# ERROR_ON_PDN_VIOLATIONS: false

# PDN_VERTICAL_LAYERS: Metal4
# PDN_HORIZONTAL_LAYERS: Metal5

IGNORE_DISCONNECTED_MODULES: 
- reversible_pe

PNR_SDC_FILE: dir::constraints.sdc

STD_CELL_LIBRARY: gf180mcu_fd_sc_mcu7t5v0
TECH_LEFS: 
    "nom_*": "pdk_dir::libs.ref/gf180mcu_fd_sc_mcu7t5v0/techlef/gf180mcu_fd_sc_mcu7t5v0__nom.tlef"

# PDK / stdcell libraryâ€“specific settings
pdk::gf180mcuD:
  scl::gf180mcu_fd_sc_mcu7t5v0:

    # Use only this timing corner
    DEFAULT_CORNER: nom_tt_025C_3v30
    STA_CORNERS: [nom_tt_025C_3v30]

    # Point that corner to a specific .lib
    LIB:
      nom_tt_025C_3v30:
        - "pdk_dir::libs.ref/gf180mcu_fd_sc_mcu7t5v0/lib/gf180mcu_fd_sc_mcu7t5v0__tt_025C_3v30.lib"

# Pin Order
FP_PIN_ORDER_CFG: dir::pin_order.cfg

MACROS:
  fa_16b:
    gds:
      - dir::../custom_ip/16b_FA/fa_16b.gds
    lef:
      - dir::../custom_ip/16b_FA/fa_16b.lef
    vh:
      - dir::../custom_ip/16b_FA/fa_16b.vh
    lib:
      "*_tt_025C_3v30":
        - dir::../custom_ip/16b_FA/fa_16b.lib
    instances:
      u_fa16_rev.u_rev.u_fa16b_rev:
        location: [1700, 80]
        orientation: N

  mult_8b:
    gds:
      - dir::../custom_ip/8b_mult/mult_8b.gds
    lef:
      - dir::../custom_ip/8b_mult/mult_8b.lef
    vh:
      - dir::../custom_ip/8b_mult/mult_8b.vh
    lib:
      "*_tt_025C_3v30":
        - dir::../custom_ip/8b_mult/mult_8b.lib
    instances:
      u8.u_rev.u_mult8b_rev:
        location: [100, 80]
        orientation: N

# add PDN OBS for mult8b_rev
# PDN_OBSTRUCTIONS:
#   - [Metal4, 150, 100, 1459.74, 400]

ROUTING_OBSTRUCTIONS:
  # - [Metal4, 130, 110, 138, 295]
  - [Metal4, 180, 115, 220, 295]
  - [Metal4, 337, 110, 414, 295]
  - [Metal4, 535, 110, 614, 295]
  - [Metal4, 730, 110, 814, 295]
  - [Metal4, 920, 110, 1014, 295]
  - [Metal4, 1120, 110, 1214, 295]
  - [Metal4, 1320, 110, 1414, 295]

FP_PDN_HORIZONTAL_HALO: 10
FP_PDN_VERTICAL_HALO: 10

# Pin metal layer
FP_IO_HLAYER: "Metal3"
FP_IO_VLAYER: "Metal2"
FP_IO_HEXTEND: 0
FP_IO_VEXTEND: 0

# Area
FP_SIZING: absolute
DIE_AREA: [0, 0, 2020, 520]
CORE_AREA: [20, 20, 2000, 500]

DRT_OPT_ITERS: 10

PDN_HPITCH: 75

PDN_CFG: dir::pdn_cfg.tcl

SIGNOFF_SDC_FILE: dir::constraints.signoff.sdc
PNR_SDC_FILE: dir::constraints.sdc
